"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[70135],{32963:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var r=i(74848),t=i(28453);const o={sidebar_position:4},s="Connections",d={id:"docs/connections",title:"Connections",description:"GraphGlue uses connections both for queries generated using the name parameter of the @DomainNode annotation and NodeSetProperty GraphGlue relationship properties.",source:"@site/docs/docs/connections.mdx",sourceDirName:"docs",slug:"/docs/connections",permalink:"/docs/connections",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docSidebar",previous:{title:"Authorization",permalink:"/docs/authorization"},next:{title:"Configuration Properties",permalink:"/docs/configuration"}},c={},l=[{value:"Schema",id:"schema",level:2},{value:"Inputs",id:"inputs",level:2},{value:"Outputs",id:"outputs",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"connections",children:"Connections"}),"\n",(0,r.jsxs)(n.p,{children:["GraphGlue uses connections both for queries generated using the ",(0,r.jsx)(n.code,{children:"name"})," parameter of the ",(0,r.jsx)(n.code,{children:"@DomainNode"})," annotation and ",(0,r.jsx)(n.code,{children:"NodeSetProperty"})," ",(0,r.jsx)(n.a,{href:"./modeling#graphglue-relationships",children:"GraphGlue relationship properties"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The generated connections adhere mostly to the ",(0,r.jsx)(n.a,{href:"https://relay.dev/graphql/connections.htm",children:"GraphQL Cursor Connections Specification"}),", except:"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["In contrast to the specification, providing both ",(0,r.jsx)(n.code,{children:"first"})," and ",(0,r.jsx)(n.code,{children:"last"})," is not supported"]})}),"\n",(0,r.jsx)(n.h2,{id:"schema",children:"Schema"}),"\n",(0,r.jsx)(n.p,{children:"The genrated connections have the following schema:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-graphql",children:"type Query {\n    types(\n        after: String,\n        before: String,\n        filter: TypeFilterInput,\n        first: Int,\n        last: Int,\n        orderBy: [TypeOrder]\n    ): TypeConnection\n}\n\ntype TypeConnection {\n    edges: [TypeEdge!]!\n    nodes: [Type!]!\n    pageInfo: PageInfo!\n    totalCount: Int!\n}\n\ntype TypeEdge {\n    cursor: String!\n    node: Type!\n}\n\ntype PageInfo {\n    endCursor: String\n    hasNextPage: Boolean!\n    hasPreviousPage: Boolean!\n    startCursor: String\n}\n\ntype Type implements Node {\n    # ...\n}\n\ninput TypeFilterInput {\n    and: [TypeFilterInput!]\n    or: [TypeFilterInput!]\n    not: TypeFilterInput\n    # ...\n}\n\ninput TypeOrder {\n    direction: OrderDirection = ASC\n    field: TypeOrderField = ID\n}\n\nenum TypeOrderField {\n    ID\n    # ...\n}\n\nenum OrderDirection {\n    ASC\n    DESC\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"inputs",children:"Inputs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"after"}),": cursor, only nodes after the cursor are returned."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"before"}),": cursor, only nodes before the cursor are returned."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"filter"}),": filters the returned nodes, for filter generation see ",(0,r.jsx)(n.a,{href:"./modeling#filtering",children:"Filtering"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"first"}),": only the first ",(0,r.jsx)(n.code,{children:"n"})," nodes are returned, must not be present if ",(0,r.jsx)(n.code,{children:"last"})," is present."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"last"}),": only the last ",(0,r.jsx)(n.code,{children:"n"})," nodes are returned, must not be present if ",(0,r.jsx)(n.code,{children:"first"})," is present."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"orderBy"}),": allows specifiying the order of the returned nodes (including the direction). Defaults to order ascending by ID. If a field other than id is specified, the id is used to guarantee strict total order, as the field may not be unique. For order field generation, see ",(0,r.jsx)(n.a,{href:"./modeling#ordering",children:"Ordering"})]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.a,{href:"./authorization#graphql",children:"GrarphQL permission checking"})," has been set up, connections are automatically filtered to only include nodes where the specified ",(0,r.jsx)(n.code,{children:"Permission"})," is granted.\nThis is done before ",(0,r.jsx)(n.code,{children:"first"})," or ",(0,r.jsx)(n.code,{children:"last"})," is applied, meaning it is not possible to extract information this way."]})}),"\n",(0,r.jsx)(n.h2,{id:"outputs",children:"Outputs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"edges"}),": all nodes, with their specific cursor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nodes"}),": all nodes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"totalCount"}),": total count of nodes after filtering, but before pagination"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pageInfo"}),": allows checking if there are nodes after/before, and get the cursor for the first/last node returned"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"Cursors are ordering dependent and are meant to be used for pagination, they are not meant to be stored long-time."})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"totalCount"})," is only fetched if specified, as it is rather expensive to fetch."]})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);